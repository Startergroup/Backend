(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a298bc04"],{"1a93":function(e,t,a){"use strict";var n=a("7a23");const s=["onClick"],c=["src"];function o(e,t,a,o,l,i){return Object(n["A"])(),Object(n["g"])("div",null,[Object(n["h"])("div",{class:Object(n["t"])(a.classes)},[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(a.headers,(e,t)=>(Object(n["A"])(),Object(n["g"])("div",{key:t,class:Object(n["t"])(e.classesHeader),onClick:e.onClick},[e.icon?(Object(n["A"])(),Object(n["g"])("img",{key:0,src:e.icon,class:Object(n["t"])(e.classesIcon)},null,10,c)):Object(n["f"])("",!0),Object(n["j"])(" "+Object(n["M"])(e.label),1)],10,s))),128))],2),Object(n["h"])("div",{class:Object(n["t"])(a.classesRowContainer)},[Object(n["H"])(e.$slots,"default")],2)])}var l={name:"Table",props:{headers:{type:Array,default:()=>[]},classes:{type:[Array,String],default:()=>[]},classesRowContainer:{type:[Array,String],default:()=>[]}}},i=a("d959"),r=a.n(i);const b=r()(l,[["render",o]]);t["a"]=b},"975d":function(e,t,a){"use strict";var n=a("7a23");function s(e,t,a,s,c,o){return Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(a.items,(t,s)=>(Object(n["A"])(),Object(n["g"])("div",{key:s,class:Object(n["t"])(a.classes)},[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(a.headers,(c,o)=>(Object(n["A"])(),Object(n["g"])("div",{key:o,class:Object(n["t"])([a.headers[o].classesHeader,a.headers[o].classesItem])},[Object(n["H"])(e.$slots,`item[${c.column}]`,{index:s,item:t,column:c.column},()=>[Object(n["j"])(Object(n["M"])(t[c.column]),1)])],2))),128)),Object(n["H"])(e.$slots,"controls",{index:s,item:t})],2))),128)}var c={name:"Row",props:{headers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},classes:{type:[Array,String],default:()=>[]}}},o=a("d959"),l=a.n(o);const i=l()(c,[["render",s]]);t["a"]=i},ad68:function(e,t,a){"use strict";a.r(t);var n=a("7a23");const s={class:"flex flex-col w-full"},c={class:"flex flex-row justify-between items-center w-full"},o=Object(n["h"])("h2",{class:"text-xl font-semibold"},"Голосования",-1),l={class:"flex flex-row items-center ml-auto gap-4"},i=["href"];function r(e,t,a,r,b,d){const u=Object(n["I"])("Button"),j=Object(n["I"])("Row"),O=Object(n["I"])("Table");return Object(n["A"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",s,[Object(n["h"])("div",c,[o,Object(n["k"])(u,{value:"Создать голосование",classes:"button button_big button_success",onClick:r.openCreateVoteModal},null,8,["onClick"])]),Object(n["k"])(O,{class:"flex flex-col w-full mt-8",classes:"wr-table mb-6 px-8 rounded-md py-2 shadow-md-y-0 text-white bg-gray-600 text-white","classes-row-container":"flex flex-col w-full px-0",headers:r.headers},{default:Object(n["T"])(()=>[Object(n["k"])(j,{headers:r.headers,items:r.votes||[],classes:"wr-table-row shadow-md-y-0 py-2"},{controls:Object(n["T"])(({item:e})=>[Object(n["h"])("div",l,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(r.controls,(t,a)=>(Object(n["A"])(),Object(n["e"])(Object(n["J"])(t.icon),{key:a,class:Object(n["t"])(t.classes),onClick:a=>t.onClick(e)},null,8,["class","onClick"]))),128))])]),_:1},8,["headers","items"])]),_:1},8,["headers"])]),r.fileURL&&r.fileURL.path?(Object(n["A"])(),Object(n["g"])("a",{key:0,class:"downloadFile",target:"_blank",href:r.fileURL.path},null,8,i)):Object(n["f"])("",!0)],64)}var b=a("2eef");const d={class:"container container_h-full column"},u={class:"headline mb-6"},j={class:"flex flex-row items-center gap-4 mb-6"},O=["onClick"],m={class:"text-base font-semibold text-white"},p={class:"flex flex-col items-center w-full gap-4 mb-6"},v=["onUpdate:modelValue","onChange"],f={key:0,class:"text-sm font-semibold text-gray-500"},h={class:"flex row gap-4"};function w(e,t,a,s,c,o){const l=Object(n["I"])("TrashIcon"),i=Object(n["I"])("Button"),r=Object(n["I"])("vue-final-modal");return Object(n["A"])(),Object(n["e"])(r,Object(n["r"])(e.$attrs,{classes:"modal","content-class":"modal__container modal__container_medium","lock-scroll":!1,"esc-to-close":!0,onBeforeOpen:t[0]||(t[0]=t=>e.overwriteParams(t))}),{default:Object(n["T"])(({close:e})=>[Object(n["h"])("div",d,[Object(n["h"])("h2",u,Object(n["M"])(a.title),1),Object(n["h"])("div",j,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(s.tabs,(e,t)=>(Object(n["A"])(),Object(n["g"])("div",{key:t,class:Object(n["t"])(["flex justify-center items-center px-6 p-2 rounded-md cursor-pointer transition-all duration-500 hover:bg-primary",s.selectedTab===e.tab_id?"bg-blue-200":"bg-gray-300"]),onClick:t=>s.onSelectTab(e.tab_id)},[Object(n["h"])("span",m,Object(n["M"])(e.name),1)],10,O))),128))]),Object(n["h"])("div",p,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(s.presentations,(e,t)=>(Object(n["A"])(),Object(n["g"])("div",{key:t,class:"flex flex-row w-full gap-4"},[Object(n["U"])(Object(n["h"])("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"input input_shadow",placeholder:"Название доклада",onChange:t=>s.onUpdatePresentation(e)},null,40,v),[[n["Q"],e.name]]),Object(n["k"])(l,{class:"w-7 text-gray-500 cursor-pointer transition transition-all duration-500 hover:text-gray-700 stroke-1",onClick:a=>s.removePresentation(null===e||void 0===e?void 0:e.presentation_id,t)},null,8,["onClick"])]))),128)),s.presentations.length?Object(n["f"])("",!0):(Object(n["A"])(),Object(n["g"])("span",f," Докладов нету "))]),Object(n["h"])("div",h,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(s.buttons,(t,a)=>(Object(n["A"])(),Object(n["e"])(i,{key:a,value:t.value,classes:t.classes,onClick:a=>t.onClick(e)},Object(n["i"])({_:2},[t.icon?{name:"icon",fn:Object(n["T"])(()=>[(Object(n["A"])(),Object(n["e"])(Object(n["J"])(t.icon.name),{class:Object(n["t"])(t.icon.classes)},null,8,["class"]))]),key:"0"}:void 0]),1032,["value","classes","onClick"]))),128))])])]),_:1},16)}a("14d9");var g=a("4798");function y(e,t){return Object(n["A"])(),Object(n["e"])("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[Object(n["k"])("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}var k=a("824e"),x=a("5502"),_={name:"CreateVoteModal",mixins:[g["a"]],props:{isEditing:{type:Boolean,default:!1},title:{type:String,default:"Создание голосования"},vote:{type:Object,default:()=>{}}},components:{Button:b["a"],PlusCircleIcon:y,TrashIcon:k["a"]},setup(e){const{isEditing:t,vote:a}=Object(n["O"])(e),s=Object(x["b"])(),c=Object(n["F"])([{value:"Добавить",classes:"button button_normal button_primary",icon:{name:"PlusCircleIcon",classes:"w-5 text-white stroke-1 mr-2"},onClick:async()=>{let e={name:""};if(t.value){const t=await s.dispatch("Vote/createPresentation",{...e,vote_id:a.value.vote_id});e={...e,presentation_id:t.presentation_id}}i.value.push(e)}},{value:"Сохранить",classes:"button button_normal button_success",icon:null,onClick:async e=>{if(t.value)return await j(),void e();await r(e)}},{value:"Отменить",classes:"button button_normal button_error",icon:null,onClick:e=>{e()}}]),o=Object(n["c"])(()=>s.state.Translation.tabs),l=Object(n["F"])(null),i=Object(n["F"])([]);async function r(e){if(!l.value)return alert("Нужно выбать секцию для которой создается голосование");if(!i.value.length)return alert("Нужно добавить хотя бы один доклад для голосования");const{tab_id:t,name:a}=o.value.find(e=>e.tab_id===l.value),n={tab_id:t,tab_name:a,presentations:i.value};await s.dispatch("Vote/createVote",n),await j(),e()}async function b(e){if(l.value=e,t.value){const t=o.value.find(t=>t.tab_id===e);await s.dispatch("Vote/updateVote",{vote_id:a.value.vote_id,tab_id:t.tab_id,tab_name:t.name})}}async function d(e){t.value&&await s.dispatch("Vote/updatePresentation",{name:e.name,presentation_id:e.presentation_id})}async function u(e,a){i.value.splice(a,1),t.value&&await s.dispatch("Vote/deletePresentation",{presentation_id:e})}async function j(){const e=await s.dispatch("Vote/getVotes");s.commit("Vote/setVotes",e)}return Object(n["y"])(async()=>{const e=await s.dispatch("Translation/getTabs");if(s.commit("Translation/setTabs",e),e.length&&(l.value=t.value?a.value.tab_id:e[0].tab_id),t.value){const{vote_id:e}=a.value,t=await s.dispatch("Vote/getVotes",{vote_id:e});i.value=t.presentations}}),{buttons:c,presentations:i,onSelectTab:b,onUpdatePresentation:d,removePresentation:u,selectedTab:l,tabs:o}}},C=a("d959"),A=a.n(C);const V=A()(_,[["render",w]]);var I=V,T=a("1a93"),P=a("975d"),R=a("ee9d");function B(e,t){return Object(n["A"])(),Object(n["e"])("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[Object(n["k"])("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})])}var M=a("e8ae"),H=a.n(M),U=a("21a6"),F={name:"Vote",components:{Button:b["a"],CreateVoteModal:I,DownloadIcon:R["a"],PencilIcon:B,Row:P["a"],Table:T["a"],TrashIcon:k["a"]},setup(){const e=Object(x["b"])(),t=Object(n["q"])("$vfm"),a=Object(n["F"])([{column:"vote_id",label:"ID",classesHeader:"flex flex-row items-center w-1/5 self-center text-lg font-semibold",classesIcon:"mr-2",classesItem:"text-gray-500",icon:"",onClick:()=>{}},{column:"tab_name",label:"Секция",classesHeader:"flex flex-row items-center w-1/3 text-lg font-semibold",classesIcon:"mr-2",classesItem:"text-gray-500",icon:"",onClick:()=>{}}]),s=Object(n["F"])([{icon:"DownloadIcon",classes:"w-6 text-gray-500 cursor-pointer transition transition-all duration-500 hover:text-gray-700 stroke-1",onClick:async({vote_id:t})=>{const a=await e.dispatch("Vote/generateReport",t);if(null!==a&&void 0!==a&&a.success){const{data:e}=a,n=new H.a.Workbook,s=n.addWorksheet("Vote report");s.columns=[{header:"ID доклада",key:"presentation_id"},{header:"Название доклада",key:"name"},{header:"Лайки",key:"likes"}],s.addRows(e);const c=await n.xlsx.writeBuffer(),o=new Blob([c],{type:"application/xlsx"});Object(U["saveAs"])(o,`vote-${t}.xlsx`)}else alert("Что-то пошло не так :(")}},{icon:"PencilIcon",classes:"w-6 text-gray-500 cursor-pointer transition transition-all duration-500 hover:text-gray-700 stroke-1",onClick:async e=>{t.show({component:I,bind:{isEditing:!0,title:"Редактирование голосования",vote:e}})}},{icon:"TrashIcon",classes:"w-6 text-gray-500 cursor-pointer transition transition-all duration-500 hover:text-gray-700 stroke-1",onClick:async({vote_id:t})=>{await e.dispatch("Vote/deleteVote",{vote_id:t}),await l()}}]),c=Object(n["c"])(()=>e.state.Vote.votes),o=Object(n["F"])(null);async function l(){const t=await e.dispatch("Vote/getVotes");e.commit("Vote/setVotes",t)}function i(){t.show({component:I})}return Object(n["y"])(async()=>{await l()}),{controls:s,fileURL:o,headers:a,openCreateVoteModal:i,votes:c}}};const G=A()(F,[["render",r]]);t["default"]=G}}]);
//# sourceMappingURL=chunk-a298bc04.9d587e11.js.map